Version 4
SHEET 1 2472 680
WIRE 2240 -400 2176 -400
WIRE 2384 -400 2320 -400
WIRE 1968 -368 1968 -400
WIRE 2288 -272 2288 -304
WIRE 1840 -256 1744 -256
WIRE 1968 -256 1968 -288
WIRE 1968 -256 1904 -256
WIRE 2032 -256 1968 -256
WIRE 2176 -256 2176 -400
WIRE 2176 -256 2112 -256
WIRE 2256 -256 2176 -256
WIRE 2384 -240 2384 -400
WIRE 2384 -240 2320 -240
WIRE 2416 -240 2384 -240
WIRE 2256 -224 2208 -224
WIRE 1744 -208 1744 -256
WIRE 1968 -208 1968 -256
WIRE 2416 -192 2416 -240
WIRE 2288 -128 2288 -208
WIRE 1968 -80 1968 -128
WIRE 2416 -64 2416 -112
WIRE -496 -32 -560 -32
WIRE -352 -32 -416 -32
WIRE -1344 -16 -1408 -16
WIRE -1200 -16 -1264 -16
WIRE -704 -16 -752 -16
WIRE -560 -16 -560 -32
WIRE -560 -16 -624 -16
WIRE 304 -16 96 -16
WIRE 1024 -16 1024 -48
WIRE 976 0 624 0
WIRE 304 16 304 -16
WIRE 96 32 96 -16
WIRE 1744 32 1744 -128
WIRE -448 96 -448 64
WIRE -1296 112 -1296 80
WIRE -704 112 -752 112
WIRE -560 112 -560 -16
WIRE -560 112 -624 112
WIRE -480 112 -560 112
WIRE 304 112 304 80
WIRE 624 112 624 0
WIRE 2144 112 2144 80
WIRE -1552 128 -1600 128
WIRE -1408 128 -1408 -16
WIRE -1408 128 -1472 128
WIRE -1328 128 -1408 128
WIRE -352 128 -352 -32
WIRE -352 128 -416 128
WIRE -320 128 -352 128
WIRE 1024 128 1024 80
WIRE 1072 128 1024 128
WIRE 1296 128 1136 128
WIRE 1440 128 1296 128
WIRE 1600 128 1504 128
WIRE 1712 128 1600 128
WIRE -1200 144 -1200 -16
WIRE -1200 144 -1264 144
WIRE -1168 144 -1200 144
WIRE -480 144 -528 144
WIRE 96 144 96 112
WIRE -1328 160 -1376 160
WIRE -752 160 -752 112
WIRE -1600 176 -1600 128
WIRE -528 176 -528 144
WIRE -320 176 -320 128
WIRE 1024 176 1024 128
WIRE -1376 192 -1376 160
WIRE 1296 192 1296 128
WIRE 1600 192 1600 128
WIRE -1168 208 -1168 144
WIRE 2144 208 2144 192
WIRE 2208 208 2208 -224
WIRE 2208 208 2144 208
WIRE 624 224 624 192
WIRE 2144 224 2144 208
WIRE -448 240 -448 160
WIRE 96 240 96 224
WIRE -1296 256 -1296 176
WIRE 976 256 720 256
WIRE -320 304 -320 256
WIRE 1024 304 1024 272
WIRE 1296 304 1296 256
WIRE 1600 304 1600 256
WIRE 720 320 720 256
WIRE -1168 336 -1168 288
WIRE 2144 336 2144 304
WIRE -752 400 -752 240
WIRE -1600 416 -1600 256
WIRE 720 432 720 400
FLAG 96 240 0
FLAG 304 -16 vdd
FLAG -448 64 vdd
FLAG 304 112 0
FLAG 1024 304 0
FLAG 1024 -48 vdd
FLAG 1296 304 0
FLAG 1600 304 0
FLAG 624 224 0
FLAG 720 432 0
FLAG 1712 128 vss
FLAG -448 240 vss
FLAG -528 176 0
FLAG -752 400 0
FLAG -1296 80 vdd
FLAG -1296 256 vss
FLAG -1376 192 0
FLAG -1600 416 0
FLAG -1168 336 0
FLAG -320 304 0
FLAG 2288 -304 vdd
FLAG 1744 32 0
FLAG 2416 -64 0
FLAG 2288 -128 0
FLAG 2144 336 0
FLAG 2144 80 vdd
FLAG 1968 -80 0
FLAG 1968 -400 vdd
FLAG -752 -16 vss
SYMBOL voltage 96 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -752 144 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V2
SYMATTR Value SINE(0 1.1 100)
SYMBOL Opamps\\UniversalOpamp2 -448 128 R0
SYMATTR InstName U2
SYMATTR Value2 ""
SYMATTR SpiceLine ""
SYMATTR SpiceLine2 ""
SYMBOL voltage 96 16 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName V3
SYMATTR Value SINE(0 0.2 20k)
SYMBOL cap 288 16 R0
SYMATTR InstName C4
SYMATTR Value 1m
SYMBOL res -608 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -400 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL nmos 976 176 R0
SYMATTR InstName M2
SYMATTR Value BSB012N03LX3
SYMBOL cap 1136 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 6.8µ
SYMATTR SpiceLine Rser=0.01
SYMBOL diode 1280 192 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode 1504 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL cap 1584 192 R0
SYMATTR InstName C5
SYMATTR Value 6.8µ
SYMATTR SpiceLine Rser=0.01
SYMBOL voltage 624 96 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName V4
SYMATTR Value PULSE(5 0 0 10n 10n 6u 10u)
SYMBOL voltage 720 304 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName V5
SYMATTR Value PULSE(5 0 50n 10n 10n 5.9u 10u)
SYMBOL pmos 976 80 M180
SYMATTR InstName M1
SYMATTR Value RRS140P03
SYMBOL voltage -1600 160 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V6
SYMATTR Value SINE(0 1.1 2000)
SYMBOL Opamps\\UniversalOpamp2 -1296 144 R0
SYMATTR InstName U1
SYMATTR Value2 ""
SYMATTR SpiceLine ""
SYMATTR SpiceLine2 ""
SYMBOL res -1456 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -1248 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -1184 192 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res -336 160 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL voltage 1744 -224 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V7
SYMATTR Value SINE(0 1.1 100)
SYMBOL Opamps\\UniversalOpamp2 2288 -240 R0
SYMATTR InstName U3
SYMATTR Value2 ""
SYMATTR SpiceLine ""
SYMATTR SpiceLine2 ""
SYMBOL res 2128 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 2336 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 2400 -208 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 2128 96 R0
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 2128 208 R0
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 1952 -384 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL res 1952 -224 R0
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL cap 1904 -272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 200n
SYMBOL res -608 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 20k
TEXT -688 296 Left 2 !.tran 1000m
TEXT -624 -128 Left 2 !.include MCP601.txt
TEXT -624 -152 Left 2 !.include LM317L_TRANS.LIB
TEXT -624 -176 Left 2 !.include tl084.txt
